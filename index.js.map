{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImage(imgInfo, page) {\n  const { data } = await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: '48844488-dc89d444e3fc14bdb2114dc7c',\n      q: imgInfo,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 40,\n      page,\n    },\n  });\n  return data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst ulGallery = document.querySelector('.gallery');\n\nexport function make(imagesArr) {\n  const photos = imagesArr\n    .map(image => {\n      return `\n        <li class=\"gallery-item\">\n            <a class='gallery-link' href=\"${image.largeImageURL}\">\n              <img class=\"li-img\"\n              src=\"${image.webformatURL}\" \n              alt=\"${image.tags}/> \n              <div class=\"li-text\">\n                <table class=\"table\">\n                    <tr><td>Likes</td><td>Views</td><td>Comment</td><td>Downloads</tr>\n                    <tr><td>>${image.likes}</td><td>${image.views}</td><td>${image.comments}</td><td>${image.downloads}</tr>\n                </table>   \n                </div>\n              </a>\n            </li>\n        `;\n    })\n    .join('');\n\n  ulGallery.insertAdjacentHTML('beforeend', photos);\n\n  lightbox.refresh();\n}\n\nconst lightbox = new SimpleLightbox('.gallery' + ' a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n","import { getImage } from './js/pixabay-api.js';\nimport { make } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form-find-img');\nconst gallery = document.querySelector('.gallery');\nconst input = document.querySelector('.enter-img');\nconst btnLoadMore = document.querySelector('.more');\nconst loader = document.querySelector('.loader');\nlet currentPage = 1;\nlet searchQuery = '';\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  loader.innerHTML = 'Wait, the image is loaded';\n\n  searchQuery = input.value.trim();\n  if (!searchQuery) return;\n\n  currentPage = 1;\n  gallery.innerHTML = '';\n\n  btnLoadMore.classList.add('hidden');\n  loader.classList.remove('hidden');\n\n  try {\n    const images = await getImage(searchQuery, currentPage);\n    if (images.hits.length === 0) {\n      iziToast.error({\n        position: 'topRight',\n        message: `Sorry, there are no images matching your search \"${searchQuery}\". Please try again!`,\n      });\n      return;\n    }\n    make(images.hits);\n\n    if (currentPage < Math.ceil(images.totalHits / 40)) {\n      btnLoadMore.classList.remove('hidden');\n    }\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      message: error.message,\n    });\n    btnLoadMore.classList.add('hidden');\n  } finally {\n    loader.classList.add('hidden');\n  }\n});\n\nbtnLoadMore.addEventListener('click', loadMore);\n\nasync function loadMore() {\n  currentPage++;\n  btnLoadMore.disabled = true;\n  loader.classList.remove('hidden');\n\n  try {\n    const images = await getImage(searchQuery, currentPage);\n    make(images.hits);\n    smoothScroll();\n\n    if (currentPage >= Math.ceil(images.totalHits / 40)) {\n      btnLoadMore.classList.add('hidden');\n      iziToast.info({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      message: error.message,\n    });\n    btnLoadMore.classList.add('hidden');\n  } finally {\n    loader.classList.add('hidden');\n    btnLoadMore.disabled = false;\n  }\n}\n\nfunction smoothScroll() {\n  const elem = document.querySelector('.gallery');\n  const rect = elem.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: rect.height * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["getImage","imgInfo","page","data","axios","ulGallery","make","imagesArr","photos","image","lightbox","SimpleLightbox","form","gallery","input","btnLoadMore","loader","currentPage","searchQuery","e","images","iziToast","error","loadMore","smoothScroll","rect"],"mappings":"owBAEO,eAAeA,EAASC,EAASC,EAAM,CAC5C,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACD,CACL,CAAG,EACD,OAAOC,CACT,CCZA,MAAME,EAAY,SAAS,cAAc,UAAU,EAE5C,SAASC,EAAKC,EAAW,CAC9B,MAAMC,EAASD,EACZ,IAAIE,GACI;AAAA;AAAA,4CAE+BA,EAAM,aAAa;AAAA;AAAA,qBAE1CA,EAAM,YAAY;AAAA,qBAClBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,+BAIAA,EAAM,KAAK,YAAYA,EAAM,KAAK,YAAYA,EAAM,QAAQ,YAAYA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,SAMjH,EACA,KAAK,EAAE,EAEVJ,EAAU,mBAAmB,YAAaG,CAAM,EAEhDE,EAAS,QAAO,CAClB,CAEA,MAAMA,EAAW,IAAIC,EAAe,aAAmB,CACrD,aAAc,MACd,aAAc,GAChB,CAAC,EC7BKC,EAAO,SAAS,cAAc,gBAAgB,EAC9CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAQ,SAAS,cAAc,YAAY,EAC3CC,EAAc,SAAS,cAAc,OAAO,EAC5CC,EAAS,SAAS,cAAc,SAAS,EAC/C,IAAIC,EAAc,EACdC,EAAc,GAElBN,EAAK,iBAAiB,SAAU,MAAMO,GAAK,CAKzC,GAJAA,EAAE,eAAc,EAChBH,EAAO,UAAY,4BAEnBE,EAAcJ,EAAM,MAAM,OACtB,EAACI,EAEL,CAAAD,EAAc,EACdJ,EAAQ,UAAY,GAEpBE,EAAY,UAAU,IAAI,QAAQ,EAClCC,EAAO,UAAU,OAAO,QAAQ,EAEhC,GAAI,CACF,MAAMI,EAAS,MAAMpB,EAASkB,EAAaD,CAAW,EACtD,GAAIG,EAAO,KAAK,SAAW,EAAG,CAC5BC,EAAS,MAAM,CACb,SAAU,WACV,QAAS,oDAAoDH,CAAW,sBAChF,CAAO,EACD,MACD,CACDZ,EAAKc,EAAO,IAAI,EAEZH,EAAc,KAAK,KAAKG,EAAO,UAAY,EAAE,GAC/CL,EAAY,UAAU,OAAO,QAAQ,CAExC,OAAQO,EAAO,CACdD,EAAS,MAAM,CACb,SAAU,WACV,QAASC,EAAM,OACrB,CAAK,EACDP,EAAY,UAAU,IAAI,QAAQ,CACtC,QAAY,CACRC,EAAO,UAAU,IAAI,QAAQ,CAC9B,EACH,CAAC,EAEDD,EAAY,iBAAiB,QAASQ,CAAQ,EAE9C,eAAeA,GAAW,CACxBN,IACAF,EAAY,SAAW,GACvBC,EAAO,UAAU,OAAO,QAAQ,EAEhC,GAAI,CACF,MAAMI,EAAS,MAAMpB,EAASkB,EAAaD,CAAW,EACtDX,EAAKc,EAAO,IAAI,EAChBI,IAEIP,GAAe,KAAK,KAAKG,EAAO,UAAY,EAAE,IAChDL,EAAY,UAAU,IAAI,QAAQ,EAClCM,EAAS,KAAK,CACZ,SAAU,WACV,QAAS,4DACjB,CAAO,EAEJ,OAAQC,EAAO,CACdD,EAAS,MAAM,CACb,SAAU,WACV,QAASC,EAAM,OACrB,CAAK,EACDP,EAAY,UAAU,IAAI,QAAQ,CACtC,QAAY,CACRC,EAAO,UAAU,IAAI,QAAQ,EAC7BD,EAAY,SAAW,EACxB,CACH,CAEA,SAASS,GAAe,CAEtB,MAAMC,EADO,SAAS,cAAc,UAAU,EAC5B,kBAAkB,sBAAqB,EACzD,OAAO,SAAS,CACd,IAAKA,EAAK,OAAS,EACnB,SAAU,QACd,CAAG,CACH"}